<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    
    
    <title>ChatOps - PagerDuty Incident Response Documentation</title>

    <!-- Author and License -->
    <meta name="author" content="PagerDuty, Inc." />
    <meta name="dcterms.license" content="http://www.apache.org/licenses/LICENSE-2.0" />

    <!-- Page Description -->
    <meta name="description" content="Throughout this documentation references are made to various chat commands, all starting with an exclamation (e.g. 'ic page'). We have bots running in our Slack rooms which watch for these commands and execute various actions for us when they're detected. This page gives an overview of the commands we've referenced in this documentation, and what they do behind the scenes." />
    <meta name="keywords" content="pagerduty, incident, response" />

    <!-- Mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
    <meta name="theme-color" content="#ffffff" />

    <!-- Canonical Link -->
    <link rel="canonical" href="https://ueokande.github.io/incident-response-docs-ja/resources/chatops/">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png" />
    <link rel="icon" type="image/png" href="/assets/img/favicon.png" />
    <link rel="apple-touch-icon" href="/assets/img/favicon.png">

    <!-- Apple -->
    <meta name="apple-mobile-web-app-title" content="PagerDuty Incident Response Documentation" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Open Graph -->
    <meta property="og:url" content="https://ueokande.github.io/incident-response-docs-ja/resources/chatops/" />
    <meta property="og:title" content="ChatOps - PagerDuty Incident Response Documentation" />
    <meta property="og:site_name" content="PagerDuty Incident Response Documentation" />
    <meta property="og:description" content="Throughout this documentation references are made to various chat commands, all starting with an exclamation (e.g. 'ic page'). We have bots running in our Slack rooms which watch for these commands and execute various actions for us when they're detected. This page gives an overview of the commands we've referenced in this documentation, and what they do behind the scenes." />
    <meta property="og:image" content="https://ueokande.github.io/incident-response-docs-ja//assets/img/covers/chatops.png" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ChatOps - PagerDuty Incident Response Documentation" />
    <meta name="twitter:description" content="Throughout this documentation references are made to various chat commands, all starting with an exclamation (e.g. 'ic page'). We have bots running in our Slack rooms which watch for these commands and execute various actions for us when they're detected. This page gives an overview of the commands we've referenced in this documentation, and what they do behind the scenes." />
    <meta name="twitter:image" content="https://ueokande.github.io/incident-response-docs-ja//assets/img/covers/chatops.png" />

    <!-- Style -->
    <link rel="stylesheet" href="../../assets/stylesheets/application-a422ff04cc.css">
    
      <link rel="stylesheet" href="../../assets/css/pagerduty.css">
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    

    <!-- Scripts -->
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-green palette-accent-blue-grey">
    
      
      
        
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="mainlogo">
        <a href="/" title="Go to homepage.">
          <img src="../../assets/img/logo.png" title="PagerDuty" />
        </a>
      </div>
      <div class="title">
        <span class="path">
          <a href="/">Incident Response</a>
          <i class="icon icon-link"></i>
        </span>
        
          <span class="path">
            
              
                Additional Resources <i class="icon icon-link"></i>
              
            
          </span>
        
        ChatOps
      </div>
    </div>
    <div class="button button-pagerduty" role="button" aria-label="PagerDuty">
      <a href="https://www.pagerduty.com" title="PagerDuty Website" target="_blank" class="toggle-button icon icon-pagerduty"></a>
    </div>
    
      
      <div class="button button-twitter" role="button" aria-label="Twitter">
        <a href="https://twitter.com/PagerDuty" title="@PagerDuty on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
      </div>
    
    
      
      <div class="button button-github" role="button" aria-label="GitHub">
        <a href="https://github.com/PagerDuty" title="@PagerDuty on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
      </div>
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  <div class="repo_header">
    <a href="" class="project"  title="GitHub repo ueokande/incident-response-docs-ja">
      <div class="banner">
        
          <div class="logo">
            <img src="../../assets/img/icon.png">
          </div>
        
        <div class="name">
          <strong>
            PagerDuty Incident Response Documentation
            <span class="version">
              
            </span>
          </strong>
        </div>
      </div>
    </a>
  </div>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-link">
            
            <a href="https://github.com/ueokande/incident-response-docs-ja/" target="_blank" title="View Source" data-action="download">
              <i class="icon icon-github"></i> Repo
            </a>
          </li>
          <li class="repo-forks">
            <a href="https://github.com/ueokande/incident-response-docs-ja//fork" target="_blank" title="Fork" data-action="fork">
              <i class="icon icon-code-fork"></i>
              <span class="count">&ndash;</span>
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/ueokande/incident-response-docs-ja//stargazers" target="_blank" title="Stars" data-action="star">
              <i class="icon icon-star"></i>
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr/>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="../..">
      Home
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Getting Started" href="../../getting_started/">
      Getting Started
    </a>
    
  </li>

          
            
  <li>
    <span class="section">On-Call</span>
    <ul>
      
        
  <li>
    <a class="" title="Being On-Call" href="../../oncall/being_oncall/">
      Being On-Call
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Who's On-Call?" href="../../oncall/whos_oncall/">
      Who's On-Call?
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Alerting Principles" href="../../oncall/alerting_principles/">
      Alerting Principles
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Before an Incident</span>
    <ul>
      
        
  <li>
    <a class="" title="What is an Incident?" href="../../before/what_is_an_incident/">
      What is an Incident?
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Severity Levels" href="../../before/severity_levels/">
      Severity Levels
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Different Roles" href="../../before/different_roles/">
      Different Roles
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Call Etiquette" href="../../before/call_etiquette/">
      Call Etiquette
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Complex Incidents" href="../../before/complex_incidents/">
      Complex Incidents
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">During an Incident</span>
    <ul>
      
        
  <li>
    <a class="" title="During an Incident" href="../../during/during_an_incident/">
      During an Incident
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Security Incident" href="../../during/security_incident_response/">
      Security Incident
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">After an Incident</span>
    <ul>
      
        
  <li>
    <a class="" title="After an Incident" href="../../after/after_an_incident/">
      After an Incident
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Post-Mortem Process" href="../../after/post_mortem_process/">
      Post-Mortem Process
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Post-Mortem Template" href="../../after/post_mortem_template/">
      Post-Mortem Template
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Effective Post-Mortems" href="../../after/effective_post_mortems/">
      Effective Post-Mortems
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Training</span>
    <ul>
      
        
  <li>
    <a class="" title="Overview" href="../../training/overview/">
      Overview
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Incident Commander" href="../../training/incident_commander/">
      Incident Commander
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Deputy" href="../../training/deputy/">
      Deputy
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Scribe" href="../../training/scribe/">
      Scribe
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Subject Matter Expert" href="../../training/subject_matter_expert/">
      Subject Matter Expert
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Customer Liaison" href="../../training/customer_liaison/">
      Customer Liaison
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Internal Liaison" href="../../training/internal_liaison/">
      Internal Liaison
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Glossary" href="../../training/glossary/">
      Glossary
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Training Courses</span>
    <ul>
      
        
  <li>
    <a class="" title="Incident Response" href="../../training/courses/incident_response/">
      Incident Response
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Additional Resources</span>
    <ul>
      
        
  <li>
    <a class="" title="Reading" href="../reading/">
      Reading
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="ChatOps" href="./">
      ChatOps
    </a>
    
      
      
        <ul>
          
            <li class="anchor">
              <a title="インシデント対応" href="#_1">
                インシデント対応
              </a>
            </li>
          
            <li class="anchor">
              <a title="ステータス" href="#_2">
                ステータス
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
        
  <li>
    <a class="" title="Anti-Patterns" href="../anti_patterns/">
      Anti-Patterns
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="About" href="../../about/">
      About
    </a>
    
  </li>

          
        </ul>
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
            <h1>ChatOps</h1>
          
          
          <p>このドキュメント全体を通して、"!"で始まる様々なチャットコマンドを参照しています（<code>!ic page</code>）。
これらのコマンドはSlack上のBotで実行し、私たちが問題を検出した時にこのコマンドを監視しています。
このページでは、このドキュメントで利用したコマンドの概要と、そのコマンドが実行する処理について紹介します。</p>
<div class="admonition question">
<p class="admonition-title">これらのBotはオープンソースですか？</p>
<p>私たちが利用しているチャットプラグインとBotは、現在は残念がらこれらのBotはオープンソース化されていません。
しかし将来、それらをオープンソース化して、皆さんが利用できるようにしたいと考えています。
それまでの間は、このページにある説明が、独自のツールで同じ機能を再現するのに役立つのを願います。</p>
</div>
<h2 id="_1">インシデント対応<a class="headerlink" href="#_1" title="Permanent link">#</a></h2>
<p><code>!ic</code> コマンドは、して体の様々なオンコールスケジュールで、PagerDuty APIをポーリングします。
現在のオンコールユーザーの名前と連絡先をキャッシュして、APIリクエストに問題が発生しても、問題ありません。</p>
<h3 id="ic"><code>!ic</code><a class="headerlink" href="#ic" title="Permanent link">#</a></h3>
<p>このコマンドは現在のオンコールのインシデントコマンダーと、彼らの電話番号とユーザーをページする方法を通知する方法を表示します。</p>
<p><img alt="Incident Commander List" src="../../assets/img/chatops/ic.png" /></p>
<h3 id="ic-page"><code>!ic page</code><a class="headerlink" href="#ic-page" title="Permanent link">#</a></h3>
<p>このコマンドはインシデント対応プロセスを手動でトリガーします。
スケジュール情報をキャッシュし、現在のオンコールを担当するインシデントコマンダー（プライマリとバックアップ、トレーニングでシャドウイングする人）をページします。
また何らかの理由でページできない場合はSlackループに通知し、ユーザーに連絡先を表示して手動で電話をかけられるようにします。
さらに新しいPagerDutyインシデントを作成して、ユーザーを関連付けます。</p>
<p>This is the command we use to manually trigger our incident response process.
It uses the cached schedule information and will page all of the current
Incident Commanders on-call (the primary, the backup, and any trainees who are
shadowing). It will also notify into the room if it is unable to page them for
any reason, and direct users to manually call the person using their contact
information. Additionally, it will create a new PagerDuty incident and link
users to it.</p>
<p><img alt="Paging Incident Commanders" src="../../assets/img/chatops/ic_page.png" /></p>
<p>何らかの理由でインシデントコマンダーを自動で呼べなかった場合は、Botは失敗を検知します。
関連するメンバーの電話番号を表示して、手動で連絡できるようにします。
テスト用のBotの出力結果を示します。
API経由でPagerDutyで呼び出せなかった場合をシミュレートしています。</p>
<p><img alt="Testing for Failure" src="../../assets/img/chatops/test_for_failure.png" /></p>
<h3 id="ic-responders"><code>!ic responders</code><a class="headerlink" href="#ic-responders" title="Permanent link">#</a></h3>
<p>これは <code>!ic</code> コマンドと同じように機能しますが、インシデントコマンダーだけでなく、チーム全員に対する情報を表示します。
それぞれのチームの、現在オンコール担当である人たちが一覧表示されます。
これは一時的に誰がインシデントの通話に参加するかを知るのに便利です。</p>
<p><img alt="Listing Responders" src="../../assets/img/chatops/ic_responders.png" /></p>
<h3 id="ic-page-responders"><code>!ic page responders</code><a class="headerlink" href="#ic-page-responders" title="Permanent link">#</a></h3>
<p>これは <code>!ic page</code> コマンドと同じように機能しますが、インシデントコマンダーだけでなく対応者一覧に対してページします。
通常は関連するチームだけがページされるのでめったに利用されることはありません。
しかし全員が総力を挙げて対応が必要になる場合や、現在のオンコール全員をページするのに必要です。</p>
<p><img alt="Paging Responders" src="../../assets/img/chatops/ic_page_responders.png" /></p>
<h3 id="ic-who-ltusergt"><code>!ic who &lt;user&gt;</code><a class="headerlink" href="#ic-who-ltusergt" title="Permanent link">#</a></h3>
<p>場合によっては、特定の誰かを指定して通話に参加させる必要があります。
このコマンドは特定のユーザーの連絡先と、ページする方法を表示します。</p>
<p><img alt="Identifying Users" src="../../assets/img/chatops/ic_who_rich.png" /></p>
<h3 id="ic-page-ltusergt"><code>!ic page &lt;user&gt;</code><a class="headerlink" href="#ic-page-ltusergt" title="Permanent link">#</a></h3>
<p>このコマンドは特定のユーザーをページします。</p>
<p><img alt="Paging a User" src="../../assets/img/chatops/ic_page_rich.png" /></p>
<h2 id="_2">ステータス<a class="headerlink" href="#_2" title="Permanent link">#</a></h2>
<p><code>!status</code>コマンドは、私たちの内部監視システムを参照して、システムによって報告された現在の状態を判断します。
これはアラートツールが問題を問題の自動で通知するために利用するステータスです。</p>
<h3 id="status"><code>!status</code><a class="headerlink" href="#status" title="Permanent link">#</a></h3>
<p>現在のシステムステータスの概要が分かります。
またステータスを確認できない場合は、問題が発生している可能性があるため、アラートが表示されます。
通常はステータスは <code>NORMAL</code> になっているはずです。</p>
<p><img alt="Displaying Status" src="../../assets/img/chatops/status.png" /></p>
<h3 id="status-stalk"><code>!status stalk</code><a class="headerlink" href="#status-stalk" title="Permanent link">#</a></h3>
<p>これは上記のコマンドと同じですが、停止するまで（<code>!status unstalk</code>）の間、30秒ごとに状態をポーリングします。
前回のチェックからステータスが変更された場合のみ、チャットルームにステータスを報告します。
インシデント発生中にこれを実行することで、モニタリングシステムを手動で確認しなくても、システムが悪い状態か回復したかを簡単に確認できます。</p>
<p><img alt="Stalking Status" src="../../assets/img/chatops/status_stalk.png" /></p>
          <aside class="copyright" role="note">
            
              Copyright &copy; PagerDuty, Inc. &ndash;
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../reading/" title="Reading">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Reading
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../anti_patterns/" title="Anti-Patterns">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Anti-Patterns
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = 'ueokande/incident-response-docs-ja';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
      <script src="../../js/github_forks.js"></script>
    
    
    
      <script>
        /* Google Analytics */
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-8759953-1', 'auto');
        ga('send', 'pageview');

        /* Track outbound links */
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });

        /* Register handler to log search on blur */
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    
  </body>
</html>